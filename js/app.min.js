(()=>{"use strict";document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("copy-link-button");function t(e){const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}e&&e.addEventListener("click",(function(){t(document.getElementById("video-chat-link").textContent),e.disabled=!0;const n=e.innerHTML;e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path d="M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z" fill="#9CA3AF"/>\n              </svg>',setTimeout((function(){e.disabled=!1,e.innerHTML=n}),2e3)}));const n=document.getElementById("timezone-select");n&&function(e){moment.tz.names().forEach((t=>{const n=document.createElement("option"),i=moment().tz(t).format("Z");n.value=t,n.text=`(GMT${i}) ${t}`,e.appendChild(n)}))}(n);const i=document.querySelector("[data-video-chat-counter]");let a=0;i&&i.addEventListener("click",(function(e){const t=e.target.classList.contains("video-chat-modal__counter-button_increment");a=t?a+1:Math.max(a-1,0),i.querySelector("input").value=a}));const s=document.getElementById("form-host-meeting"),c=document.getElementById("form-join-meeting"),o=document.getElementById("form-schedule-meeting");function l(e){let t=0;return e.querySelectorAll("._req").forEach((n=>{var i;(i=n).classList.remove("_form-error"),i.parentElement.classList.remove("_form-error"),(("INPUT"===n.tagName||"TEXTAREA"===n.tagName||"SELECT"===n.tagName)&&""===n.value.trim()||n.classList.contains("video-chat-modal__participants-list")&&0===n.childElementCount)&&(!function(e,t){e.classList.add("_form-error"),e.parentElement.classList.add("_form-error");const n=t.querySelectorAll(".video-chat-modal__error");0===n.length&&t.insertAdjacentHTML("beforeend",'<div class="video-chat-modal__error">Please fill out all fields.</div>')}(n,e),t++)})),t}function d(e,t){$(t).modal("hide"),e.reset(),function(e){const t=e.querySelectorAll(".video-chat-modal__error");t&&(t.forEach((e=>{e.remove()})),e.querySelectorAll("._req").forEach((e=>{e.classList.remove("_form-error"),e.parentElement.classList.remove("_form-error")})))}(e),e.querySelector(".video-chat-modal__participants-list")&&(e.querySelector(".video-chat-modal__participants-list").innerHTML="",document.querySelectorAll(".modal-participants__item").forEach((e=>{e.classList.remove("active")})))}s&&c&&o&&(s.addEventListener("submit",(async function(e){e.preventDefault();0===l(s)&&d(s,"#host-meeting")})),c.addEventListener("submit",(async function(e){e.preventDefault();0===l(c)&&d(c,"#join-meeting")})),o.addEventListener("submit",(async function(e){e.preventDefault();if(0===l(o)){const e=function(){const e=document.querySelector(".video-chat-modal__input.meeting-title").value,t=document.getElementById("timezone-select").value,n=document.querySelector('.video-chat-modal__input[type="date"]').value,i=document.querySelector('.video-chat-modal__inputs input[type="time"]').value,a=document.querySelector('.video-chat-modal__inputs input[type="time"]:last-of-type').value,s=document.querySelector(".video-chat-modal__counter-input").value,c=document.querySelector(".video-chat-modal__select").value,o=`${s} ${c}`,l=Math.floor(1e6*Math.random()),d=document.getElementById("general-chbx-1").checked,m=document.getElementById("general-chbx-2").checked;return{meetingTitle:e,timezone:t,date:n,startTime:i,endTime:a,reminder:o,selectedParticipants:r,alwaysJoin:d,muteParticipants:m,meetingID:l,host:"Current User"}}();g.push(e),function(e){const t=document.createElement("div");t.classList.add("meetings-block__item","meetings-item");const n=new Date(`${e.date}T${e.startTime}`),i=new Date,a=n-i,s=Math.floor(a/6e4);let c;if(s>0)if(s>60){const e=Math.floor(s/60);c=`Starts in ${e} ${e>1?"hours":"hour"}`}else c=`Starts in ${s} ${s>1?"mins":"min"}`;else c="Meeting has started";t.innerHTML=`\n           <div class="meetings-item__top">\n               <h4 class="meetings-item__title">${e.meetingTitle}</h4>\n               <div class="meetings-item__start">${c}</div>\n           </div>\n           <div class="meetings-item__info">\n               <div class="meetings-item__info-item">\n                   <div class="meetings-item__info-title">Date & Time</div>\n                   <div class="meetings-item__info-text">${e.date} - ${e.startTime} to ${e.endTime}</div>\n               </div>\n               <div class="meetings-item__info-item">\n                   <div class="meetings-item__info-title">Meeting ID</div>\n                   <div class="meetings-item__info-text">${e.meetingID}</div>\n               </div>\n               <div class="meetings-item__info-item">\n                   <div class="meetings-item__info-title">Host</div>\n                   <div class="meetings-item__info-text">${e.host}</div>\n               </div>\n           </div>\n           <div class="meetings-item__link">\n               <div class="meetings-item__link-title">Link</div>\n               <a href="#">Link to Meeting</a>\n           </div>\n       `;document.querySelector(".meetings-block__items").appendChild(t)}(e),d(o,"#schedule-meeting")}})),s.addEventListener("reset",(()=>d(s,"#host-meeting"))),c.addEventListener("reset",(()=>d(c,"#join-meeting"))),o.addEventListener("reset",(()=>d(o,"#schedule-meeting"))));const m=[{name:"Ralph Edwards",imgSrc:"img/video-chat-page/participants/07.jpg"},{name:"Devon Lane",imgSrc:"img/video-chat-page/participants/08.jpg"},{name:"Robert Fox",imgSrc:"img/video-chat-page/participants/09.jpg"}],r=[];function u(e,t,n){const i=document.querySelector(t+" .video-chat-modal__participants-list"),a=document.querySelector(n+" .modal-participants__items"),s=document.querySelectorAll(n+" .modal-participants__item");i.innerHTML="",e.forEach((e=>{const t=document.createElement("div");t.classList.add("modal-participants__item"),t.innerHTML=`\n               <div class="modal-participants__item-info">\n                   <img src="${e.imgSrc}" alt="">\n                   <p>${e.name}</p>\n               </div>`,t.addEventListener("click",(()=>{if(t.classList.contains("active")){t.classList.remove("active");const n=document.querySelector(`.video-chat-modal__participant img[src="${e.imgSrc}"]`);if(n){i.removeChild(n.parentElement);const t=r.findIndex((t=>t.name===e.name));-1!==t&&r.splice(t,1)}}else{s.forEach((e=>{e.classList.remove("active")})),t.classList.add("active");const n=document.createElement("li");n.classList.add("video-chat-modal__participant"),n.innerHTML=`\n                       <img src="${e.imgSrc}" alt="">\n                   `,n.addEventListener("click",(()=>{i.removeChild(n),t.classList.remove("active");const a=r.findIndex((t=>t.name===e.name));-1!==a&&r.splice(a,1)})),i.appendChild(n);-1===r.findIndex((t=>t.name===e.name))&&r.push(e)}})),a.appendChild(t)}))}s&&o&&(u(m,"#host-meeting","#host-meeting-participants"),u(m,"#schedule-meeting","#schedule-meeting-participants"));const g=[];const v=document.getElementById("call-page-copy-button");v&&v.addEventListener("click",(function(){t(document.getElementById("call-page-link").textContent),v.disabled=!0;const e=v.innerHTML;v.innerHTML='<svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path d="M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z" fill="#3B82F6"/>\n              </svg>\n              Copied!\n              ',setTimeout((function(){v.disabled=!1,v.innerHTML=e}),2e3)}));const p=document.getElementById("settings-modal-form");p&&(p.addEventListener("submit",(async function(e){e.preventDefault();0===l(p)&&d(s,"#settings-modal")})),p.addEventListener("reset",(()=>d(p,"#settings-modal"))));const _=document.querySelectorAll(".chat-tabs__button"),f=document.querySelectorAll(".chat-tabs__body");_&&_.forEach((e=>{e.addEventListener("click",(()=>{const t=e.dataset.tab;_.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),f.forEach((e=>e.style.display="none")),document.getElementById(t).style.display="flex"}))}));const h=document.getElementById("message-form"),y=document.getElementById("message-input"),L=document.getElementById("messages"),E=document.getElementById("file-input");function S(e){const t=y.value.trim(),n=(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(""!==t||e){const i=document.createElement("div");i.classList.add("chat-tabs__message","chat-tabs__message_outgoing","message-sender");let a=`\n              <div class="message-sender__info">\n                  <div class="message-sender__info-row">\n                      <div class="message-sender__info-left">\n                          <button type="button" class="message-sender__more-button"></button>\n                          <div class="message-sender__time">${n}</div>\n                      </div>\n                      <div class="message-sender__name">Jack Murphy</div>\n                  </div>\n                  <div class="message-sender__image">\n                      <img src="img/call-page/participants/jack-murphy.jpg" alt="Your Name">\n                  </div>\n              </div>\n          `;if(e){const t=e.name;let n;n=e.size>1048576?(e.size/1048576).toFixed(2)+"MB":(e.size/1024).toFixed(2)+"KB",a+=`\n                  <div class="message-sender__file file-message loading">\n                      <div class="file-message__wrapper">\n                          <div class="file-message__icon"></div>\n                          <div class="file-message__info">\n                              <a href="${URL.createObjectURL(e)}" download="${t}" class="file-message__name">${t}</a>\n                              <div class="file-message__size">${n}</div>\n                          </div>\n                          <button type="button" class="file-message__remove"></button>\n                      </div>\n                      <div class="file-message__loading-wrapper">\n                          <div class="file-message__loading"></div>\n                      </div>\n                  </div>\n              `}if(""!==t&&(a+=`<p class="message-sender__text">${t}</p>`),i.innerHTML=a,L.appendChild(i),y.value="",e){const e=i.querySelector(".file-message__loading");let t=0;const n=setInterval((function(){t+=1,e.style.width=`${t}%`,t>=100&&(clearInterval(n),i.querySelector(".file-message").classList.remove("loading"),setTimeout((function(){i.querySelector(".file-message__loading-wrapper").remove()}),500))}),20)}const s=i.querySelector(".file-message__remove");s&&s.addEventListener("click",(function(){i.remove()})),L.scrollTop=L.scrollHeight}}h&&h.addEventListener("submit",(function(e){e.preventDefault(),S()})),y&&y.addEventListener("keydown",(function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),S())})),E&&E.addEventListener("change",(function(){const e=E.files[0];e&&(y.value="",S(e))}));const b=[{name:"You",imgSrc:"img/call-page/participants/jack-murphy.jpg"},{name:"Sen Do",imgSrc:""},{name:"Jessie Cooper",imgSrc:"img/call-page/participants/jessie-cooper.jpg"},{name:"Simalakamut",imgSrc:"img/call-page/participants/simalakamut.jpg"},{name:"Raina",imgSrc:"img/call-page/participants/02.jpg"}],q=document.querySelector(".chat-participants");q&&b.forEach((e=>{const t="You"===e.name,n=t?'<button type="button" class="chat-participants__button-mic my-mic-button"></button>':'<span class="chat-participants__button-mic"></span>',i=t?'<button type="button" class="chat-participants__button-vid my-cam-button"></button>':'<span class="chat-participants__button-vid"></span>',a=`\n            <div class="chat-participants__item">\n                <div class="chat-participants__item-left">\n                    <div class="chat-participants__image">\n                        ${""!==e.imgSrc?`<img src="${e.imgSrc}" alt="">`:`<div class="default-avatar">${e.name[0]}</div>`}\n                    </div>\n                    <div class="chat-participants__name">${e.name}</div>\n                    <div class="chat-participants__hand-icon"></div>\n                </div>\n                <div class="chat-participants__item-right">\n                    ${n}\n                    ${i}\n                </div>\n            </div>\n        `;q.innerHTML+=a}));const T=document.querySelectorAll(".my-mic-button"),k=document.querySelectorAll(".my-cam-button"),M=document.querySelector(".call-participants__big-item"),w=document.querySelector(".call-page__button_hand"),I=document.querySelector(".chat-participants__hand-icon"),x=document.querySelector(".call-page__button_chat");T&&T.forEach((e=>{e.addEventListener("click",(()=>{T.forEach((e=>e.classList.toggle("mic-off")))}))})),k&&k.forEach((e=>{e.addEventListener("click",(()=>{k.forEach((e=>{e.classList.toggle("cam-off")})),M.classList.toggle("camera-off")}))})),w&&I&&w.addEventListener("click",(()=>I.classList.toggle("raise"))),x&&document.addEventListener("click",(function(e){e.target.closest(".call-page__button_chat")?document.querySelector(".call-page__chat").classList.toggle("open"):e.target.closest(".call-page__chat")||document.querySelector(".call-page__chat").classList.remove("open")}))})),window.FLS=!0})();